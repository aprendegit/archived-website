{"id":608,"date":"2013-06-11T07:51:35","date_gmt":"2013-06-11T05:51:35","guid":{"rendered":"https:\/\/aprendegit.com\/?p=608"},"modified":"2024-07-25T16:48:41","modified_gmt":"2024-07-25T14:48:41","slug":"6-motivos-por-los-que-git-no-es-un-sistema-de-backup","status":"publish","type":"post","link":"https:\/\/aprendegit.com\/6-motivos-por-los-que-git-no-es-un-sistema-de-backup\/","title":{"rendered":"6 motivos por los que git no es un sistema de backup"},"content":{"rendered":"<p><span style=\"line-height: 1.714285714; font-size: 1rem;\">Esta es una frase que escucho muy a menudo:<\/span><\/p>\n<pre>\u00a0\u201cYo tengo backup de mi repositorio git en github\u201d.<\/pre>\n<p>Siempre que la escucho acabo teniendo la misma conversaci\u00f3n con la persona que la ha dicho. Intento hacerle ver porqu\u00e9 github, bitbucket o cualquier otro servicio de hosting de repositorios no son una copia de seguridad de tu repositorio y c\u00f3mo en determinadas circunstancias (muy habituales cuando trabajas en equipo) puedes perder informaci\u00f3n por usarlos para lo que no son.<\/p>\n<p>Esto desde el punto de vista pr\u00e1ctico. Si escarbamos un poco, lo normal es que detr\u00e1s de esta frase se esconda un uso no del todo correcto de git o un desconocimiento de ciertas funcionalidades de la herramienta que espero corregir con este art\u00edculo.<\/p>\n<p>En adelante me referir\u00e9 a tu cuenta de github, bitbucket o cualquier otro sistema de hosting de repositorios git como <em>servidor git<\/em>.<\/p>\n<h2>1- Git es algo m\u00e1s que hacer un commit al final de nuestra jornada<\/h2>\n<p>El flujo m\u00e1s b\u00e1sico de uso de git que me he encontrado es el siguiente:<\/p>\n<ul>\n<li><span style=\"line-height: 14px;\">Llego a trabajar por la ma\u00f1ana y trabajo<\/span><\/li>\n<li>Antes de irme hago un commit<\/li>\n<li>Despu\u00e9s del commit hago un push<\/li>\n<\/ul>\n<p>As\u00ed, tienes en tu servidor git la \u00faltima versi\u00f3n del c\u00f3digo fuente. Si respetas este flujo, efectivamente tienes una copia de la \u00faltima versi\u00f3n de tu c\u00f3digo fuente en tu servidor. Ahora bien, <strong>no tienes una copia de tu repositorio, porque el repositorio del servidor al que haces push y el de tu m\u00e1quina local son diferentes. \u00a1Por eso haces push!<\/strong><\/p>\n<p>Este forma de trabajo viola varias de las buenas pr\u00e1cticas de git:<\/p>\n<ul>\n<li><span style=\"line-height: 1.714285714; font-size: 1rem;\">No est\u00e1s haciendo commits at\u00f3micos, peque\u00f1os y muy a menudo. Lo que significa que no est\u00e1s pensando en c\u00f3mo gestionar tu c\u00f3digo sino en guardar la \u00faltima versi\u00f3n en un \u00abcaj\u00f3n de sastre\u00bb que es tu servidor<\/span><\/li>\n<li><span style=\"line-height: 1.714285714; font-size: 1rem;\">No est\u00e1s trabajando con ramas locales para desarrollar funcionalidad<\/span><\/li>\n<li>Probablemente, no tienes definido ning\u00fan flujo de trabajo que te permita gestionar cambios de contexto a la hora de trabajar<\/li>\n<\/ul>\n<h2>2- No est\u00e1s guardando una copia de tus ramas locales<\/h2>\n<p>Las ramas locales, son eso, ramas locales. Las usas para muchas cosas, entre ellas para hacer pruebas, hacer refactorings del c\u00f3digo o desarrollar funcionalidades en paralelo. Al no hacer push, de estas ramas, no tienes copia de los commits en tu servidor git.<\/p>\n<p>S\u00e9 lo que est\u00e1s pensando, basta con hacer push de todas las ramas y ya est\u00e1. Bien, eso es correcto si est\u00e1s tu solo con tu repositorio. Ahora bien, si est\u00e1s trabajando en equipo y todos vosotros compart\u00eds el mismo repositorio git, la cosa cambia \u00bfTe imaginas a 5 personas todas subiendo sus ramas de prueba al servidor git para tener copia de seguridad? El caos est\u00e1 garantizado si no se organiza todo muy, muy, muy bien.<\/p>\n<h2>3- No est\u00e1s guardando una copia del reflog<\/h2>\n<p>El reflog es un fichero de log que est\u00e1 en la carpeta .git de tu repositorio local donde se guarda un log de todos los cambios de referencias que ocurren en tu repositorio. Cada vez que cambias de rama, haces un merge, un rebase, un pull o un cherry-pick (entre otros) se guarda en el reflog lo que ha pasado.<\/p>\n<p>Este fichero es el que te permite dar marcha atr\u00e1s cuando la l\u00edas parda. \u00c9chale un vistazo a <a title=\"Git: la he liado parda\" href=\"https:\/\/aprendegit.com\/git-la-he-liado-parda\/\">este hangout<\/a> para un ejemplo sobre c\u00f3mo se usa.<\/p>\n<p>Tu reflog no est\u00e1 en tu servidor git. El servidor git tiene su propio reflog que no tiene porqu\u00e9 coincidir con el tuyo.\u00a0De nuevo, si est\u00e1s tu solo y haces push de todas tus ramas, el reflog del servidor se parecer\u00e1 mucho al tuyo. Eso s\u00ed, en caso de desastre, tendr\u00e1s que entrar al servidor a verlo o copiartelo a tu m\u00e1quina local&#8230; oh, vaya, espera, que est\u00e1s trabajando con github \/ bitbucket y no te dejan entrar a sus servidores a descargarte el reflog, desde luego qu\u00e9 t\u00edos perros \u00bfno?.<\/p>\n<p>Si est\u00e1s trabajando en equipo, el reflog del servidor tiene todas las modificaciones de referencias hechas por t\u00ed y el resto del equipo. \u00a1Intentar encontrar algo en ese reflog es garant\u00eda de diversi\u00f3n durante horas!<\/p>\n<h2>4- No tienes backup de los hooks de tu repositorio git<\/h2>\n<p>Dentro de la carpeta .git\/hooks de tu repositorio puedes poner <a href=\"http:\/\/git-scm.com\/book\/es\/Personalizando-Git-Puntos-de-enganche-Git\">hooks<\/a>. Estos hooks no son m\u00e1s que scripts que se ejecutan antes o despu\u00e9s de los comandos git y que te permiten interceptar la ejecuci\u00f3n para hacer \u00abcosas\u00bb. Por ejemplo, el &#8216;pre-commit&#8217; te permite manipular din\u00e1micamente el mensaje del commit que se genera por defecto.<\/p>\n<p>Cualquier hook que hayas puesto en tu m\u00e1quina local en la carpeta .git\/hooks, no tiene copia de seguridad en tu servidor git.<\/p>\n<h2>5- No tienes backup de tu configuraci\u00f3n local<\/h2>\n<p>Dentro de tu repositorio tienes un fichero con la configuraci\u00f3n local de tu repositorio: .git\/config. En este fichero puedes guardar varias cosas, entre ellas el nombre y correo electr\u00f3nico del autor de los commits, alisas de comandos de esos molones que te has bajado de internet y, en general, opciones de configuraci\u00f3n espec\u00edficas de ese repositorio en esa m\u00e1quina.<\/p>\n<p>Este fichero tampoco se sube a tu servidor git, as\u00ed que en caso de desastre, lo pierdes y tienes que volver a generar la configuraci\u00f3n del repositorio.<\/p>\n<h2>6- git permite sobreescribir la historia de tu repositorio<\/h2>\n<p>Si trabajas con m\u00e1s gente, en tu repositorio no vas a estar hurgando solo t\u00fa. Tendr\u00e1s c\u00f3digo de otras personas, har\u00e1s merges o pull requests. Hay alguien que puede estar tocando el repositorio detr\u00e1s de t\u00ed as\u00ed que entre el momento que ocurre el desastre y \u00abrecuperas\u00bb el repositorio haciendo un clon, muchas cosas pueden haber cambiado.<\/p>\n<p>Ponte en esta situaci\u00f3n: te vas de vacaciones mientras tus compa\u00f1eros trabajan en el repositorio. A la vuelta tu disco duro ha muerto, o durante el viaje te roban el port\u00e1til, as\u00ed que clonas de nuevo el repositorio y te pones a trabajar\u2026 Lo que vas a clonar no es lo que ten\u00edas antes de irte, el repositorio contendr\u00e1 todos los cambios que tus compa\u00f1eros han hecho en tu ausencia.<\/p>\n<p>Me dir\u00e1s: \u201ct\u00edo, no tienes ni idea. Una vez clonado hago un reset al commit de antes de irme de vacaciones y ya est\u00e1\u201d\u2026 Y yo te digo \u00bfY no sabes que tus compa\u00f1eros del alma pueden haberse cargado esos commits con un rebase, por ejemplo?. Recuerda: git, a diferencia de mercurial, permite sobreescribir la historia del repositorio as\u00ed que \u00a1\u00a1nada te garantiza que cuando vuelvas de tus vacaciones los commits sigan ah\u00ed!!<\/p>\n<h1><span style=\"line-height: 1.714285714; font-size: 1rem;\">Conclusi\u00f3n<\/span><\/h1>\n<p><span style=\"line-height: 1.714285714; font-size: 1rem;\">Seg\u00fan la <\/span><a style=\"line-height: 1.714285714; font-size: 1rem;\" href=\"http:\/\/en.wikipedia.org\/wiki\/Backup\">wikipedia<\/a><span style=\"line-height: 1.714285714; font-size: 1rem;\">:<\/span><\/p>\n<pre>a backup, or the process of backing up, refers to the copying and archiving of \r\ncomputer data so it may be used to restore the original after a data loss event.<\/pre>\n<p>Si pierdes tu disco duro, y recuperas un repositorio haciendo un nuevo clon, no est\u00e1s recuperando el repositorio como lo ten\u00edas antes del desastre as\u00ed que seg\u00fan esta definici\u00f3n, no es una copia de seguridad.\u00a0Adem\u00e1s \u00bfT\u00fa crees que Linus Torvalds hizo git para esto? \u00bfPara hacer backup? \u00a1eso ya lo ten\u00eda con los ficheros tar con los que empez\u00f3! Si solo lo usas para hacer copias de respaldo te est\u00e1s perdiendo muchas cosas.<\/p>\n<p><span style=\"line-height: 1.714285714; font-size: 1rem;\">Git no es un sistema de copia de seguridad de nuestro c\u00f3digo. Ahora bien, si se dan estas condiciones:<\/span><\/p>\n<ol>\n<li>Est\u00e1s trabajando t\u00fa solo<\/li>\n<li>Haces push de todos los commits al repositorio remoto<\/li>\n<li>Todas las ramas que creas son remotas<\/li>\n<li>Tienes un repositorio que llamas scripts_y_configuracion en el que guardas los hooks, alias, pro-tips y configuraciones personalizadas de tus repositorios.<\/li>\n<\/ol>\n<p>y eres consciente de lo que est\u00e1s haciendo,\u00a0<strong>puedes utilizar github como un backup (parcial) de tu c\u00f3digo fuente, no de tu repositorio.<\/strong><\/p>\n<p>De igual manera, si trabajas en equipo y cada integrante tiene su propio repositorio, cada uno de vosotros podr\u00eda usar git de esta manera. Aunque es un flujo muy b\u00e1sico que sirve para empezar a trabajar, no lo recomiendo en casi ning\u00fan caso: en seguida se te queda corto.<\/p>\n<p>En mi caso particular, TimeMachine me ha salvado ya en varias ocasiones de problemas, ahorr\u00e1ndome mucho tiempo y trabajo. <b>Aqu\u00ed tienes mi consejo: usa una herramienta de backups para hacer backups y una herramienta de gesti\u00f3n de c\u00f3digo para gestionar c\u00f3digo.<\/b><\/p>\n","protected":false},"excerpt":{"rendered":"<p>Esta es una frase que escucho muy a menudo: \u00a0\u201cYo tengo backup de mi repositorio git en github\u201d. Siempre que la escucho acabo teniendo la misma conversaci\u00f3n con la persona que la ha dicho. Intento hacerle ver porqu\u00e9 github, bitbucket o cualquier otro servicio de hosting de repositorios no son una copia de seguridad de [&hellip;]<\/p>\n","protected":false},"author":2,"featured_media":0,"comment_status":"closed","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"_monsterinsights_skip_tracking":false,"_monsterinsights_sitenote_active":false,"_monsterinsights_sitenote_note":"","_monsterinsights_sitenote_category":0,"jetpack_post_was_ever_published":false,"_jetpack_newsletter_access":"","_jetpack_dont_email_post_to_subs":false,"_jetpack_newsletter_tier_id":0,"_jetpack_memberships_contains_paywalled_content":false,"_jetpack_memberships_contains_paid_content":false,"footnotes":"","jetpack_publicize_message":"","jetpack_publicize_feature_enabled":true,"jetpack_social_post_already_shared":true,"jetpack_social_options":{"image_generator_settings":{"template":"highway","enabled":false},"version":2}},"categories":[10],"tags":[32],"class_list":["post-608","post","type-post","status-publish","format-standard","hentry","category-general","tag-backup"],"jetpack_publicize_connections":[],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v23.4 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>6 motivos por los que git no es un sistema de backup - Aprende GIT<\/title>\n<meta name=\"description\" content=\"En esta entrada vemos porqu\u00e9 git no es un sistema de backup y qu\u00e9 informaci\u00f3n no se almacena en el repositorio remoto.\" \/>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/aprendegit.com\/6-motivos-por-los-que-git-no-es-un-sistema-de-backup\/\" \/>\n<meta property=\"og:locale\" content=\"es_ES\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"6 motivos por los que git no es un sistema de backup - Aprende GIT\" \/>\n<meta property=\"og:description\" content=\"En esta entrada vemos porqu\u00e9 git no es un sistema de backup y qu\u00e9 informaci\u00f3n no se almacena en el repositorio remoto.\" \/>\n<meta property=\"og:url\" content=\"https:\/\/aprendegit.com\/6-motivos-por-los-que-git-no-es-un-sistema-de-backup\/\" \/>\n<meta property=\"og:site_name\" content=\"Aprende GIT\" \/>\n<meta property=\"article:published_time\" content=\"2013-06-11T05:51:35+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2024-07-25T14:48:41+00:00\" \/>\n<meta name=\"author\" content=\"alfonso\" \/>\n<meta name=\"twitter:label1\" content=\"Escrito por\" \/>\n\t<meta name=\"twitter:data1\" content=\"alfonso\" \/>\n\t<meta name=\"twitter:label2\" content=\"Tiempo de lectura\" \/>\n\t<meta name=\"twitter:data2\" content=\"7 minutos\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"WebPage\",\"@id\":\"https:\/\/aprendegit.com\/6-motivos-por-los-que-git-no-es-un-sistema-de-backup\/\",\"url\":\"https:\/\/aprendegit.com\/6-motivos-por-los-que-git-no-es-un-sistema-de-backup\/\",\"name\":\"6 motivos por los que git no es un sistema de backup - Aprende GIT\",\"isPartOf\":{\"@id\":\"https:\/\/aprendegit.com\/#website\"},\"datePublished\":\"2013-06-11T05:51:35+00:00\",\"dateModified\":\"2024-07-25T14:48:41+00:00\",\"author\":{\"@id\":\"https:\/\/aprendegit.com\/#\/schema\/person\/d7815f12de5748b52eadab35cd0801d5\"},\"description\":\"En esta entrada vemos porqu\u00e9 git no es un sistema de backup y qu\u00e9 informaci\u00f3n no se almacena en el repositorio remoto.\",\"inLanguage\":\"es\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/aprendegit.com\/6-motivos-por-los-que-git-no-es-un-sistema-de-backup\/\"]}]},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/aprendegit.com\/#website\",\"url\":\"https:\/\/aprendegit.com\/\",\"name\":\"Aprende GIT\",\"description\":\"Informaci\u00f3n y experiencias sobre el uso de git\",\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":{\"@type\":\"EntryPoint\",\"urlTemplate\":\"https:\/\/aprendegit.com\/?s={search_term_string}\"},\"query-input\":{\"@type\":\"PropertyValueSpecification\",\"valueRequired\":true,\"valueName\":\"search_term_string\"}}],\"inLanguage\":\"es\"},{\"@type\":\"Person\",\"@id\":\"https:\/\/aprendegit.com\/#\/schema\/person\/d7815f12de5748b52eadab35cd0801d5\",\"name\":\"alfonso\",\"image\":{\"@type\":\"ImageObject\",\"inLanguage\":\"es\",\"@id\":\"https:\/\/aprendegit.com\/#\/schema\/person\/image\/\",\"url\":\"https:\/\/aprendegit.com\/wp-content\/litespeed\/avatar\/1\/11264ed1c2ec0decf145ada60ab2ee73.jpg?ver=1725196738\",\"contentUrl\":\"https:\/\/aprendegit.com\/wp-content\/litespeed\/avatar\/1\/11264ed1c2ec0decf145ada60ab2ee73.jpg?ver=1725196738\",\"caption\":\"alfonso\"},\"url\":\"https:\/\/aprendegit.com\/author\/alfonso\/\"}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","yoast_head_json":{"title":"6 motivos por los que git no es un sistema de backup - Aprende GIT","description":"En esta entrada vemos porqu\u00e9 git no es un sistema de backup y qu\u00e9 informaci\u00f3n no se almacena en el repositorio remoto.","robots":{"index":"index","follow":"follow","max-snippet":"max-snippet:-1","max-image-preview":"max-image-preview:large","max-video-preview":"max-video-preview:-1"},"canonical":"https:\/\/aprendegit.com\/6-motivos-por-los-que-git-no-es-un-sistema-de-backup\/","og_locale":"es_ES","og_type":"article","og_title":"6 motivos por los que git no es un sistema de backup - Aprende GIT","og_description":"En esta entrada vemos porqu\u00e9 git no es un sistema de backup y qu\u00e9 informaci\u00f3n no se almacena en el repositorio remoto.","og_url":"https:\/\/aprendegit.com\/6-motivos-por-los-que-git-no-es-un-sistema-de-backup\/","og_site_name":"Aprende GIT","article_published_time":"2013-06-11T05:51:35+00:00","article_modified_time":"2024-07-25T14:48:41+00:00","author":"alfonso","twitter_misc":{"Escrito por":"alfonso","Tiempo de lectura":"7 minutos"},"schema":{"@context":"https:\/\/schema.org","@graph":[{"@type":"WebPage","@id":"https:\/\/aprendegit.com\/6-motivos-por-los-que-git-no-es-un-sistema-de-backup\/","url":"https:\/\/aprendegit.com\/6-motivos-por-los-que-git-no-es-un-sistema-de-backup\/","name":"6 motivos por los que git no es un sistema de backup - Aprende GIT","isPartOf":{"@id":"https:\/\/aprendegit.com\/#website"},"datePublished":"2013-06-11T05:51:35+00:00","dateModified":"2024-07-25T14:48:41+00:00","author":{"@id":"https:\/\/aprendegit.com\/#\/schema\/person\/d7815f12de5748b52eadab35cd0801d5"},"description":"En esta entrada vemos porqu\u00e9 git no es un sistema de backup y qu\u00e9 informaci\u00f3n no se almacena en el repositorio remoto.","inLanguage":"es","potentialAction":[{"@type":"ReadAction","target":["https:\/\/aprendegit.com\/6-motivos-por-los-que-git-no-es-un-sistema-de-backup\/"]}]},{"@type":"WebSite","@id":"https:\/\/aprendegit.com\/#website","url":"https:\/\/aprendegit.com\/","name":"Aprende GIT","description":"Informaci\u00f3n y experiencias sobre el uso de git","potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https:\/\/aprendegit.com\/?s={search_term_string}"},"query-input":{"@type":"PropertyValueSpecification","valueRequired":true,"valueName":"search_term_string"}}],"inLanguage":"es"},{"@type":"Person","@id":"https:\/\/aprendegit.com\/#\/schema\/person\/d7815f12de5748b52eadab35cd0801d5","name":"alfonso","image":{"@type":"ImageObject","inLanguage":"es","@id":"https:\/\/aprendegit.com\/#\/schema\/person\/image\/","url":"https:\/\/aprendegit.com\/wp-content\/litespeed\/avatar\/1\/11264ed1c2ec0decf145ada60ab2ee73.jpg?ver=1725196738","contentUrl":"https:\/\/aprendegit.com\/wp-content\/litespeed\/avatar\/1\/11264ed1c2ec0decf145ada60ab2ee73.jpg?ver=1725196738","caption":"alfonso"},"url":"https:\/\/aprendegit.com\/author\/alfonso\/"}]}},"jetpack_featured_media_url":"","jetpack_shortlink":"https:\/\/wp.me\/p2Y8Ja-9O","jetpack_sharing_enabled":true,"_links":{"self":[{"href":"https:\/\/aprendegit.com\/wp-json\/wp\/v2\/posts\/608"}],"collection":[{"href":"https:\/\/aprendegit.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/aprendegit.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/aprendegit.com\/wp-json\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"https:\/\/aprendegit.com\/wp-json\/wp\/v2\/comments?post=608"}],"version-history":[{"count":14,"href":"https:\/\/aprendegit.com\/wp-json\/wp\/v2\/posts\/608\/revisions"}],"predecessor-version":[{"id":623,"href":"https:\/\/aprendegit.com\/wp-json\/wp\/v2\/posts\/608\/revisions\/623"}],"wp:attachment":[{"href":"https:\/\/aprendegit.com\/wp-json\/wp\/v2\/media?parent=608"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/aprendegit.com\/wp-json\/wp\/v2\/categories?post=608"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/aprendegit.com\/wp-json\/wp\/v2\/tags?post=608"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}